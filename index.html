<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Kunlun's Service</title>
<style>
* {margin: 0; padding: 0; box-sizing: border-box;}
body {
    font-family: 'Segoe UI', sans-serif; 
    background: radial-gradient(ellipse at top, #1a1a2e 0%, #0a0a0a 50%, #000000 100%);
    background-attachment: fixed;
    color: #c9d1d9; 
    min-height: 100vh;
}

/* Header */
.header {
    background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
    padding: 12px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #2a2a2a;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}
.menu-icon {color: #00ff88; font-size: 24px; cursor: pointer;}
.logo {
    background: #00ff88;
    color: #000;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 20px;
}
.theme-icon {color: #00ff88; font-size: 24px; cursor: pointer;}

/* Hero Section */
.hero {
    text-align: center;
    padding: 60px 20px 40px;
    background: linear-gradient(180deg, rgba(0, 255, 136, 0.05) 0%, rgba(169, 112, 255, 0.05) 50%, transparent 100%);
}
.title {
    font-size: 3em;
    font-weight: bold;
    margin-bottom: 10px;
}
.title .blox {color: #fff;}
.title .live {
    background: linear-gradient(90deg, #00ff88 0%, #00cc6a 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.title .items {
    background: linear-gradient(90deg, #ffa500 0%, #ff8c00 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.title .block {
    background: linear-gradient(90deg, #ff1493 0%, #ff69b4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.title .spin {
    background: linear-gradient(90deg, #a970ff 0%, #c77dff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.title .snipe {
    background: linear-gradient(90deg, #00ff88 0%, #00cc6a 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.description {
    color: #8b949e;
    max-width: 800px;
    margin: 0 auto 30px;
    line-height: 1.6;
}

/* Search & Filters */
.controls {
    max-width: 1400px;
    margin: 0 auto 30px;
    padding: 0 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
}
.search-box {
    flex: 1;
    min-width: 250px;
    position: relative;
}
.search-box input {
    width: 100%;
    padding: 10px 15px 10px 35px;
    background: #1a1a1a;
    border: 1px solid #2a2a2a;
    border-radius: 8px;
    color: #c9d1d9;
    font-size: 14px;
}
.search-box::before {
    content: "üîç";
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
}
.filter-btn {
    padding: 8px 16px;
    background: #1a1a1a;
    border: 1px solid #2a2a2a;
    border-radius: 8px;
    color: #c9d1d9;
    cursor: pointer;
    font-size: 13px;
    transition: 0.3s;
}
.filter-btn:hover {background: #2a2a2a;}
.filter-btn.omega {border-color: #f12b3c; color: #f12b3c;}
.filter-btn.legendary {border-color: #ff7b00; color: #ff7b00;}
.filter-btn.epic {border-color: #a970ff; color: #a970ff;}
.filter-btn.rare {border-color: #1f6feb; color: #1f6feb;}
.filter-btn.all {border-color: #00ff88; color: #00ff88;}

/* inactive ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡∏™‡∏∏‡∏î */
.filter-btn.inactive {
    border-color: #444 !important;
    color: #666 !important;
    background: #181818 !important;
    opacity: 0.7;
}

/* Grid */
.grid {
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
    gap: 20px; 
    max-width: 1400px; 
    margin: 0 auto;
    padding: 0 20px 40px;
}

/* Cards */
.card {
    background: #1a1a1a; 
    border-radius: 12px; 
    padding: 0;
    overflow: hidden;
    transition: 0.3s;
    position: relative;
}
.card:hover {
    transform: translateY(-5px); 
    box-shadow: 0 10px 30px rgba(0, 255, 136, 0.2);
}
.card-image {
    width: 100%;
    aspect-ratio: 1;
    background: linear-gradient(135deg, #a970ff 0%, #c77dff 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
.card-image img {
    max-width: 70%;
    max-height: 70%;
    object-fit: contain;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
    position: relative;
    z-index: 2;
}

/* Animated gradient background for tools */
.card-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    opacity: 0.3;
    filter: blur(40px);
    z-index: 1;
}

.card-image::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 80%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    z-index: 1;
}

.card-content {
    padding: 12px;
}
.weapon-name {
    font-size: 1.1em; 
    font-weight: bold; 
    margin-bottom: 8px;
    color: #fff;
}
.target {
    color: #8b949e; 
    font-size: 0.85em; 
    margin-bottom: 4px;
}
.server {
    color: #58a6ff; 
    font-size: 0.85em; 
    margin-bottom: 4px;
}
.players {
    color: #8b949e; 
    font-size: 0.85em; 
    margin-bottom: 4px;
}
.status {
    color: #00ff88; 
    font-size: 0.85em; 
    margin-bottom: 10px;
}
.get-jobid-btn {
    width: 100%;
    padding: 10px;
    background: #00ff88;
    color: #000;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    font-size: 13px;
    transition: 0.3s;
}
.get-jobid-btn:hover {
    background: #00cc6a;
}

/* Rarity Backgrounds */
.card-image.legendary {
    background: linear-gradient(135deg, #ff7b00 0%, #ff9500 50%, #ffb700 100%);
    box-shadow: inset 0 0 50px rgba(255, 123, 0, 0.3);
}
.card-image.epic {
    background: linear-gradient(135deg, #a970ff 0%, #c77dff 50%, #e0b3ff 100%);
    box-shadow: inset 0 0 50px rgba(169, 112, 255, 0.3);
}
.card-image.omega {
    background: linear-gradient(135deg, #f12b3c 0%, #ff4757 50%, #ff6b7a 100%);
    box-shadow: inset 0 0 50px rgba(241, 43, 60, 0.3);
}
.card-image.rare {
    background: linear-gradient(135deg, #1f6feb 0%, #388bfd 50%, #58a6ff 100%);
    box-shadow: inset 0 0 50px rgba(31, 111, 235, 0.3);
}
.card-image.uncommon {
    background: linear-gradient(135deg, #5cb85c 0%, #7bc96f 50%, #9ad99a 100%);
    box-shadow: inset 0 0 50px rgba(92, 184, 92, 0.3);
}
.card-image.common {
    background: linear-gradient(135deg, #6e7681 0%, #8b949e 50%, #a8b1bb 100%);
    box-shadow: inset 0 0 50px rgba(110, 118, 129, 0.3);
}
</style>
</head>
<body>
<!-- Header -->
<div class="header">
    <div class="menu-icon">‚ò∞</div>
    <div class="logo">B</div>
    <div class="theme-icon">‚òÄ</div>
</div>

<!-- Hero Section -->
<div class="hero">
    <h1 class="title">
        <span class="blox">Kunlun Service</span><br>
        <span class="live">Live</span> <span class="items">Items</span> <span class="block">Block</span> <span class="spin">Spin</span> <span class="snipe">Snipe</span>
    </h1>
    <p class="description">
        Hey exploiters! This is a tool for identifying servers with all kinds of tools, with functions to tell you the gun name, tool type, target name, and job id for joining the server. What are you waiting for? Come join us!
    </p>
</div>

<!-- Search & Filters -->
<div class="controls">
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search for items..." />
    </div>
    <button class="filter-btn all">All</button>
    <button class="filter-btn omega">Omega</button>
    <button class="filter-btn legendary">Legendary</button>
    <button class="filter-btn epic">Epic</button>
    <button class="filter-btn rare">Rare</button>
</div>

<!-- Grid -->
<div id="list" class="grid"></div>

<script>
const BIN_ID = "69206a3943b1c97be9bbceef";
const API_KEY = "$2a$10$bupM4/tI67/0cmeRDHWc4.wmhRSjksb9tgknDgpHJiKKYZYNp7IHi";
const URL = `https://api.jsonbin.io/v3/b/${BIN_ID}/latest`;
let allItems = [];
let currentSearch = "";
let currentRarity = [];
const MAX_ITEMS = 100; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ

function getRarityClass(r) {
    const m = (r+"").toLowerCase();
    if (m === "legendary") return "legendary";
    if (m === "epic") return "epic";
    if (m === "omega") return "omega";
    if (m === "rare") return "rare";
    if (m === "uncommon") return "uncommon";
    if (m === "common") return "common";
    return "epic";
}

// ‡πÅ‡∏õ‡∏•‡∏á imageId ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏Ç‡∏≠‡∏á Roblox thumbnail
function getRobloxImageUrl(imageId) {
    if (!imageId || imageId === "") return "https://via.placeholder.com/150?text=No+Image";
    
    // ‡∏•‡∏ö rbxassetid:// ‡πÅ‡∏•‡∏∞ rbxthumb:// ‡∏≠‡∏≠‡∏Å
    let id = imageId.toString()
        .replace("rbxassetid://", "")
        .replace("rbxthumb://", "")
        .replace("http://www.roblox.com/asset/?id=", "")
        .replace("https://www.roblox.com/asset/?id=", "");
    
    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÉ‡∏ä‡πâ asset thumbnail API
    if (/^\d+$/.test(id)) {
        return `https://assetdelivery.roblox.com/v1/asset/?id=${id}`;
    }
    
    return "https://via.placeholder.com/150?text=No+Image";
}

async function loadData() {
    try {
        const res = await fetch(URL, {headers: {"X-Master-Key": API_KEY}});
        const json = await res.json();
        const newItems = json.record.items || [];
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° items ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤)
        newItems.forEach(newItem => {
            const uniqueKey = `${newItem.weaponName}_${newItem.playerName}_${newItem.jobId}`;
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const exists = allItems.some(item => 
                `${item.weaponName}_${item.playerName}_${item.jobId}` === uniqueKey
            );
            if (!exists) {
                allItems.unshift(newItem); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            }
        });
        
        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ items ‡πÄ‡∏Å‡∏¥‡∏ô MAX_ITEMS ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å
        if (allItems.length > MAX_ITEMS) {
            allItems = allItems.slice(0, MAX_ITEMS);
        }
        
        renderItems();
    } catch(e) {
        console.error(e);
    }
}

function renderItems() {
    const list = document.getElementById("list");
    list.innerHTML = "";
    const renderedIds = new Set();
    
    allItems.forEach(item => {
        // Filter by search
        if (
            currentSearch &&
            !(
                (item.weaponName && item.weaponName.toLowerCase().includes(currentSearch)) ||
                (item.playerName && item.playerName.toLowerCase().includes(currentSearch)) ||
                (item.placeId && item.placeId.toString().includes(currentSearch))
            )
        ) return;
        // Filter by rarity (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏±‡∏ô)
        if (currentRarity.length > 0 && !currentRarity.includes((item.rarity || "").toLowerCase())) return;

        // ‡πÉ‡∏ä‡πâ combination ‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á unique key
        const uniqueKey = `${item.weaponName}_${item.playerName}_${item.jobId}`;
        if (renderedIds.has(uniqueKey)) return;
        renderedIds.add(uniqueKey);

        const card = document.createElement("div");
        card.className = `card`;
        const imgUrl = getRobloxImageUrl(item.imageId);
        card.innerHTML = `
            <div class="card-image ${getRarityClass(item.rarity)}">
                <img src="${imgUrl}" alt="${item.weaponName}" onerror="this.src='https://via.placeholder.com/150?text=${encodeURIComponent(item.weaponName)}'" />
            </div>
            <div class="card-content">
                <div class="weapon-name">${item.weaponName}</div>
                <div class="target">Target: ${item.playerName}</div>
                <div class="server">Server: ${item.placeId}</div>
                <div class="players">Job ID: ${item.jobId.substring(0, 8)}...</div>
                <div class="status">‚Ä¢ Just now</div>
                <button class="get-jobid-btn" onclick="navigator.clipboard.writeText('${item.jobId}'); this.textContent='‚úì Copied!'; setTimeout(() => this.textContent='‚úì Get JobId', 2000);">‚úì Get JobId</button>
            </div>
        `;
        list.appendChild(card);
    });
}

// --- Search & Filter logic ---
document.getElementById("searchInput").addEventListener("input", function(e) {
    currentSearch = e.target.value.trim().toLowerCase();
    renderItems();
});

document.querySelectorAll(".filter-btn").forEach(btn => {
    btn.addEventListener("click", function() {
        if (btn.classList.contains("all")) {
            // Reset all filters
            document.querySelectorAll(".filter-btn").forEach(b => {
                b.classList.remove("active");
                b.classList.add("inactive");
            });
            btn.classList.add("active");
            btn.classList.remove("inactive");
            currentRarity = [];
            renderItems();
            return;
        }

        const rarity = btn.classList.contains("omega") ? "omega"
            : btn.classList.contains("legendary") ? "legendary"
            : btn.classList.contains("epic") ? "epic"
            : btn.classList.contains("rare") ? "rare"
            : null;
        if (!rarity) return;

        // ‡∏õ‡∏¥‡∏î All button
        document.querySelector(".filter-btn.all").classList.remove("active");
        document.querySelector(".filter-btn.all").classList.add("inactive");

        if (btn.classList.contains("active")) {
            btn.classList.remove("active");
            btn.classList.add("inactive");
            currentRarity = currentRarity.filter(r => r !== rarity);
        } else {
            btn.classList.add("active");
            btn.classList.remove("inactive");
            if (!currentRarity.includes(rarity)) currentRarity.push(rarity);
        }
        renderItems();
    });
});

// Set All button as active by default
document.querySelector(".filter-btn.all").classList.add("active");
document.querySelector(".filter-btn.all").classList.remove("inactive");

loadData();
setInterval(loadData, 4000);
</script>
</body>
</html>
